<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Impex Builder</title>
    <link href="assets/fonts/Oswald-Regular.ttf" rel="stylesheet">
    <link href="assets/fonts/PlayfairDisplay-Regular.ttf" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-12">

          <h3 class="main-title">impex builder <a href="#" class="btn btn-default info-button" data-toggle="modal" data-target="#infoModal" title="Help"><i> i </i></a> <br><small>Tool to create Hybris ImpEX files</small></h3>

          <div class="build-container">

            <div class="row">

              <div class="col-xs-12">

                <label class="impex-header" contenteditable="true">Reference Header</label>

                <form class="form-inline header_form">
                  <div class="radio" >
                    <label><input name="operation" type="radio" value="INSERT" checked>INSERT</label>
                  </div>
                  <div class="radio">
                    <label><input name="operation" type="radio" value="INSERT_UPDATE">INSER_UPDATE</label>
                  </div>
                  <div class="radio">
                    <label><input name="operation" type="radio" value="REMOVE">REMOVE</label>
                  </div>
                </form>

                <div class="pull-left">
                  <table class="table table-hover table-striped table-responsive" id="main-table"></table>
                </div>
                <div class="add-row-container">
                  <span class="add-row btn btn-success addColumn" title="Add Column"> + </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-xs-12">
                <span class="add-row btn btn-success addRow" data-count="1" title="Add Row"> + </span>
                <span class="add-row btn btn-success addRow" data-count="5" title="Add 5 Rows"> +5 </span>
              </div>

              <div class="col-xs-12 file-download-container">
                <h4 class="file-download-title">download impex file</h4>
                <input type="text" id="file-name" class="file-name-input" placeholder="Impex File Name">
                <span id="download-button" class="btn btn-primary">Download&nbsp;&nbsp;<span class="glyphicon glyphicon-download-alt"></span></span>
              </div>
            </div>

          </div>


          <div class="impex-output" id="impex-output">
            <div class="impex-output-title">
              <h5 class="impex-output-title-header">impex output</h5>
              <div class="impex-output-title-controls">
                <span class="btn btn-primary clipboard" data-clipboard-target="#impex-output-body" title="Copy to Clipboard">Copy&nbsp;&nbsp;<span class="glyphicon glyphicon-copy"></span></span>
                <span class="btn btn-primary collapse-output" title="Hide/Show Output"><span class="glyphicon glyphicon-minus"></span></span>
              </div>
            </div>
            <div class="impex-output-body" id="impex-output-body"></div>
          </div>

        </div>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">How to Use Impex Builder</h4>
          </div>
          <div class="modal-body">
            <p>This tool is created to make life of Hybris Developer a bit easy. It aims to reduce efforts needed for creating ImpEX and save time.</p>
            <p>Here is guide for using this tool.</p>

            <ul class="help-modal-list">
              <li class="help-modal-list-item">The "Reference Header" is optional field to put header of ImpEX. It can be easily referred from here.</li>
              <li class="help-modal-list-item">Choose type of Impex:
                <ul class="help-modal-type-list">
                  <li class="help-modal-type-list-item">INSERT</li>
                  <li class="help-modal-type-list-item">INSERT_UPDATE</li>
                  <li class="help-modal-type-list-item">DELETE</li>
                </ul>
                This is also otional but it you wish to download ImpEX file ready to be executed, this must be selected.
              </li>
              <li class="help-modal-list-item">This is what its all about! The fields to create ImpEX.
                <ol class="help-modal-table-list">
                  <li class="help-modal-table-list-item">Headers of columns marked Header - 1, Header - 2 etc are for ImpEX fields. These are mandetory as these are mapped to output.</li>
                  <li class="help-modal-table-list-item">Start putting respective values in table inut fields and see ImpEX being build on the fly!</li>
                </ol>
              </li>
              <li class="help-modal-list-item">
                <ul class="help-modal-buttons-list">
                  <li class="help-modal-buttons-list">Click &nbsp;<img src="assets/images/+.png" alt="+1" class="help-modal-image"> &nbsp;at right of table to add column and on bottom of table to add row at end.</li>
                  <li class="help-modal-buttons-list">Click &nbsp;<img src="assets/images/-.png" alt="-1" class="help-modal-image"> &nbsp;at right of row to remove the row and on bottom of column to remove the column.</li>
                  <li class="help-modal-buttons-list">Click &nbsp;<img src="assets/images/+5.png" alt="+5" class="help-modal-image"> &nbsp;at bottom of table to add 5 rows at end of table.</li>
                </ul>
              </li>
              <li class="help-modal-list-item">You can download the output you see in .impex file. Put the name for file in the field and hit "Download" button.</li>
              <li class="help-modal-list-item">Alternatively, you can manually copy output from bottom. Cooler way to do that is clicking "Copy" button which will do the trick!</li>
              <li class="help-modal-list-item">Enjoy!</li>
            </ul>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-slimScroll/1.3.8/jquery.slimscroll.js"></script>
    <script src="assets/js/helpers.js"></script>
    <script src="assets/js/functions.js"></script>


    <script id="impex-table" type="text/x-handlebars-template">
      <thead>
        <tr class="animated fadeIn">
          {{#each headers}}
            <td><label class="table-header" contenteditable="true" data-col="{{@index}}">{{{this}}}</label></td>
          {{/each}}
        </tr>
      </thead>
      <tbody>
        {{#each rows}}
            <tr class="animated fadeIn">
              {{#each this}}
                <td><input type="text" class="impex-input" value="{{this}}" data-col="{{@index}}" data-row="{{@../index}}"/></td>
              {{/each}}
              <td>
                <div href="#" class="btn btn-block btn-danger removeRow" data-row="{{@index}}" title="Remove Row">-</div>
              </td>
            </tr>
        {{/each}}
        <tbody>
        <tfoot>
          <tr class="animated fadeIn">
            {{#each rows.[0]}}
              <td><div href="#" class="btn btn-block btn-danger removeColumn" data-col="{{@index}}" title="Remove Column">-</div></td>
            {{/each}}
          </tr>
        </tfoot>
    </script>

    <script id="impex-out" type="text/x-handlebars-template">
        <div class="impex-output-header">{{operation}} {{#each headers}}{{{this}}};{{/each}}</div>
{{#each rows}}<div>{{#each this}};{{this}}{{/each}}</div>
{{/each}}
    </script>

  </body>

  <footer>
    Created by Akshay Kulkarni for <a href="https://www.kpit.com/" target="_blank">KPIT Technologies <span class="glyphicon glyphicon-new-window"></span></a>
  </footer>

</html>
